<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content=".">
    <title>Math Errors</title>    
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css" integrity="sha384-" crossorigin="anonymous">
	<link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/grids-responsive-min.css">

    
    <link rel="stylesheet" href="../icons/fontawesome/css/all.css">


    <link rel="stylesheet" href="css/home.css">
	<style>
  	.asdBlock {
  		display: inline-block;
  		position: relative;
  		margin: 1rem;
  	}
  	.asdBlock > div {
  		display: block;
  		clear:both;
  		position: relative;
  	}
  	.asdBlock > div > span {
  		float: right;
  		position: relative;
  		padding: .25rem;
  		line-height: 2rem;
  		font-size: 1.5rem;
  		width: 1rem;
  		height: 2rem;
  		text-align: center;
  	}
  	.asdBlock > .carryRow > span {
  		border: 1px solid black;
  		height: 1.2rem;
  		line-height: 1rem;
  		font-size: 1rem;
  		padding: .1rem .25rem;
  		
  	}
  	.sumRow > span {
  		border: 1px solid black;
  		
  	}
  </style>
</head>
<body>

<div class="header">
    <div class="home-menu pure-menu pure-menu-horizontal pure-menu-fixed">
        <a class="pure-menu-heading header-logo" href="../"><img width="160" src="../images/logo.png"></a>

        <ul class="pure-menu-list header-menu">
        	<li class="pure-menu-item"><a href="../new" class="pure-menu-link">Tools</a></li>
        	<!--<li class="pure-menu-item"><a href="../new" class="pure-menu-link">Diagnostic</a></li>-->
        	<!--<li class="pure-menu-item"><a href="../new" class="pure-menu-link">Error Finder</a></li>-->
            <li class="pure-menu-item"><a href="../new" class="pure-menu-link">Subjects</a></li>
            <!--<li class="pure-menu-item"><a href="../new" class="pure-menu-link">Arithmetic</a></li>-->
            <!--<li class="pure-menu-item"><a href="../new" class="pure-menu-link">Addition</a></li>-->
            <!--<li class="pure-menu-item"><a href="../new" class="pure-menu-link">Subtraction</a></li>-->
            <!--<li class="pure-menu-item"><a href="../new" class="pure-menu-link">Multiplication</a></li>-->
            <!--<li class="pure-menu-item"><a href="../new" class="pure-menu-link">Division</a></li>-->
            
            <!--<li class="pure-menu-item"><a href="../new" class="pure-menu-link">Algebra</a></li>-->
            <!--<li class="pure-menu-item"><a href="../new" class="pure-menu-link">Evaluate</a></li>-->
            <!--<li class="pure-menu-item"><a href="../new" class="pure-menu-link">Solve</a></li>-->
            
            <!--<li class="pure-menu-item"><a href="../new" class="pure-menu-link">Geometry</a></li>-->
            <!--<li class="pure-menu-item"><a href="../new" class="pure-menu-link">Area</a></li>-->
            <!--<li class="pure-menu-item"><a href="../new" class="pure-menu-link">Perimeter</a></li>-->
            <!--<li class="pure-menu-item"><a href="../new" class="pure-menu-link">Volume</a></li>-->
            <!--<li class="pure-menu-item"><a href="../new" class="pure-menu-link">Equation of Line</a></li>-->
            
            <!--<li class="pure-menu-item"><a href="../new" class="pure-menu-link">Trigonometry</a></li>-->
            <!--<li class="pure-menu-item"><a href="../new" class="pure-menu-link">Angles</a></li>-->
            <!--<li class="pure-menu-item"><a href="../new" class="pure-menu-link">Functions</a></li>-->
            
            <!--<li class="pure-menu-item"><a href="../new" class="pure-menu-link">Calculus</a></li>-->
            <!--<li class="pure-menu-item"><a href="../new" class="pure-menu-link">Derivatives</a></li>-->
            <!--<li class="pure-menu-item"><a href="../new" class="pure-menu-link">Integrals</a></li>-->
            
            <li class="pure-menu-item"><a href="../account" class="pure-menu-link">My Account</a></li>
        </ul>
    </div>
</div>

<div class="splash-container">
    <div class="splash">
        <h1 class="splash-head">{{ type }}</h1>
    </div>
</div>

<div class="content-wrapper">
	<div class="content">
		
        <div class="pure-g">
            <div class="l-box pure-u-1 pure-u-md-1-3 pure-u-lg-1-3">

                <div class="asdBlock" id="asdBlock">

					
					
				</div>
                <button onclick="submitAnswer()">Submit</button>
            </div>
            
        </div>
    </div>
	
	

    <div class="footer l-box is-center">
        View the source of this layout to learn more. Made with love by the YUI Team.
    </div>

</div>
<script>
	var input_numbers;
	var sumButtons = false;
	function newQuestion(numbers,carries,answer){
		input_numbers = numbers;
		var el = document.getElementById('asdBlock');
		el.innerHTML = '';
		var div = document.createElement('div');
		
		if (2==2){
			div.classList.add('carryRow');
			for (var i=0;i<carries.length;i++){
				var span = document.createElement('span');
				span.textContent = carries[i];
				div.appendChild(span);
			}
			el.appendChild(div);
		}
		
		
		for (var i=0;i<numbers.length;i++){
			div = document.createElement('div');
			div.classList.add('addRow');
			for (var ii=numbers[i].length-1;ii>=0;ii--){
				var span = document.createElement('span');
				span.textContent = numbers[i][ii];
				div.appendChild(span);
			}
			if (i == numbers.length-1){
				var span = document.createElement('span');
				span.textContent = '+';
				div.appendChild(span);
			}
			el.appendChild(div);
		}
		
		div = document.createElement('div');
		div.classList.add('lineRow');
		div.appendChild(document.createElement('hr'));
		el.appendChild(div);
		
		if (sumButtons){
			div = document.createElement('div');
			div.classList.add('sumRow');
			for (var ii=0;ii<answer.length;ii++){
				var span = document.createElement('span');
				span.id = 'answer'+ii;
				span.textContent = answer[answer.length-ii-1];
				span.addEventListener('click',updateSum);
				div.appendChild(span);
			
			
			
			}
			el.appendChild(div);
		}
		else {
			div = document.createElement('div');
			div.classList.add('sumRow');
			var input = document.createElement('input');
			input.setAttribute('type','number');
			div.appendChild(input);
			el.appendChild(div);
		}
	}
	//newQuestion([[1,2,3],[3,4,5]],['','','',''],['','','','']);
	function updateSum(evt){
		var el = evt.target;
		var x = parseInt(el.textContent);
		if (isNaN(x)){
			x = 0;
		}
		if (x<9){
			x++;
		}
		el.textContent = x;
	}
	function submitAnswer(){
		var answer = 0;
		if (sumButtons){
			var el = document.getElementById('asdBlock');
			var ell = el.querySelectorAll('.sumRow > span');
			for (var i=ell.length-1;i>=0;i--){
				if (isNaN(parseInt(ell[i].textContent))){
					answer *= 10;
				}
				else {
					answer *= 10;
					answer += parseInt(ell[i].textContent);
				}
			}
		}
		else {
			var el = document.getElementById('asdBlock');
			var ell = el.querySelector('.sumRow > input');
			answer = parseInt(ell.value);
		}
		var jsonmessage = [input_numbers[0],input_numbers[1],''+answer];
		ws.send(JSON.stringify(jsonmessage));
	}
	
	
	
	var ws = new WebSocket('wss://matherrors.com:8080');
	ws.onopen = function(evt) {
	
	}
	ws.onmessage = function(evt){
		var dm = JSON.parse(evt.data);
		newQuestion(dm[0],dm[1],dm[2]);
		
	}
</script>

</body>
</html>