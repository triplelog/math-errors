{% load piwik %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">

    <title>Starter Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="static/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="static/css/starter-template.css" rel="stylesheet">
    <link href="static/css/share.css" rel="stylesheet">
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
    <style>

    #myCanvas {
        display: block;
        padding: 0;
        margin: 0 auto;


    }

    @media(max-width:1200px) {

        #myCanvas {
            width: 100%;
            height: auto;
        }
    }

    </style>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.js"></script>
    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <script src="assets/js/ie-emulation-modes-warning.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="assets/js/vendor/jquery.min.js"><\/script>')</script>
<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>





    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html" data-ajax="false">Step By Step Derivative Calculator</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="index.html" data-ajax="false">Home</a></li>
            <li><a href="about.html" data-ajax="false">About</a></li>
        <li><a href="help.html" data-ajax="false">Help</a></li>
        <li><a href="worksheets.html" data-ajax="false">Worksheets</a></li>

          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">

      <div class="starter-template">
        <div class="col-md-3 col-lg-4">
            <div class="row visible-md visible-lg">
                <h4>Enter Function Below:</h4>
            </div>
            <div class="row the_form">
                <form action="" method="post" data-ajax="false">
            {% csrf_token %}
            {{ form }}
            <br />
            <button type="submit" class="btn btn-lg btn-primary">See Solution</button><br />
            
            </form>
            </div>
            {% if is_derivative %}
          <div class="row visible-dm visible-lg">
              <div class="col-md-12">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                      <h3 class="panel-title">Not working as expected?</h3>
                    </div>
                    <div class="panel-body katex_div">
                      Click here to view some tips and common causes of discrepencies. If this doesn't help, follow the link to submit an error report so we can fix it or make it more intuitive. 
                    </div>
                </div>
              </div>
            </div>
            {% endif %}
            <div class="row visible-md visible-lg">
                <ul class="share-buttons">
                  <li><a href="https://www.facebook.com/sharer/sharer.php?u=&t=" title="Share on Facebook" target="_blank"><img src="static/images/Facebook.png"></a></li>
                  <li><a href="https://twitter.com/intent/tweet?source=&text=:%20" target="_blank" title="Tweet"><img src="static/images/Twitter.png"></a></li>
                  <li><a href="https://plus.google.com/share?url=" target="_blank" title="Share on Google+"><img src="static/images/Google+.png"></a></li>
                  <li><a href="http://www.reddit.com/submit?url=&title=" target="_blank" title="Submit to Reddit"><img src="static/images/Reddit.png"></a></li>
                  <li><a href="mailto:?subject=&body=:%20" target="_blank" title="Email"><img src="static/images/Email.png"></a></li>
                </ul>
            </div>
            <div class="row">
            <div class="col-lg-12 visible-lg"><img src="http://placehold.it/300x250"></div>
            <div class="col-lg-12 visible-md"><img src="http://placehold.it/160x600"></div>
            </div>
            <div class="row">
            <div class="col-lg-12 visible-lg"><img src="http://placehold.it/300x250"></div>
            <audio id="myAudio"><source src="" type="audio/mpeg"></audio></div>
            

            
        </div>
        <div class="col-md-9 col-lg-8">
          {% if is_derivative %}
          <div class="row">
              <div class="col-md-12">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                      <h3 class="panel-title">The derivative of <div class="katex_div_il">{{ ofunction }}</div> is:</h3>
                    </div>
                    <div class="panel-body katex_div">
                      {{ full_derivative }}
                    </div>
                </div>
              </div>
            </div>
            {% endif %}
            <div class="row">
                    
                            {% if is_derivative %}
                        <div class="panel panel-primary" data-role="page" id="pageone">
                                 <div class="canvas-container"><canvas id="myCanvas" width="700" height="900" style="background:white" tabindex="1" autofocus></canvas></div></div>
                        <script type="text/javascript">
                        var imgn = 0;
                        var src_str = [];
                        var asrc_str = [];
                        var n_img = 0;
                        function preloadImage(url)
                        {
                            var img=new Image();
                            img.src=url;
                        }
                        {% for image in images %}

                        src_str.push('/media/new/{{ image }}');
                        n_img=n_img+1;
                        {% endfor %}
                        {% for audio in audios %}
                        asrc_str.push('/media/audio/{{ audio }}');
                        {% endfor %}
                        var canvas = document.getElementById('myCanvas');
                        var the_audio = document.getElementById("myAudio"); 
                              var context = canvas.getContext('2d');
                              var imageObj = new Image();

                              imageObj.onload = function() {
                                context.drawImage(imageObj, 0, 0);
                              };
                              imageObj.src = src_str[0];

                        document.getElementById("myCanvas").focus();
                        {% for image in images %}
                        preloadImage('/media/new/{{ image }}');
                        {% endfor %}
                        window.addEventListener('keydown',this.check,false);

                        function check(e) {



                            if(e.keyCode==39){
                        imageObj.onload = function() {
                                context.drawImage(imageObj, 0, 0);
                              };
                              imgn=imgn+1;
                              if(imgn>n_img-1){imgn=n_img-1}
                              imageObj.src = src_str[imgn];
                              the_audio.src=asrc_str[imgn];
                              the_audio.play();
                        }
                            if(e.keyCode==37){
                        imageObj.onload = function() {
                                context.drawImage(imageObj, 0, 0);
                              };
                              imgn=imgn-1;
                              if(imgn<0){imgn=0}
                              imageObj.src = src_str[imgn];
                              the_audio.pause();
                        }
                        }
                        $(document).on("pagecreate","#pageone",function(){
                          $("canvas").on("swiperight",function(){
                            imageObj.onload = function() {
                                context.drawImage(imageObj, 0, 0);
                              };
                              imgn=imgn+1;
                              if(imgn>n_img-1){imgn=n_img-1}
                              imageObj.src = src_str[imgn];
                              the_audio.src=asrc_str[imgn];
                              the_audio.play();
                          });    
                          $("canvas").on("swipeleft",function(){
                            imageObj.onload = function() {
                                context.drawImage(imageObj, 0, 0);
                              };
                              imgn=imgn-1;
                              if(imgn<0){imgn=0}
                              imageObj.src = src_str[imgn];
                              the_audio.pause();
                          });                      
                        });
                        </script>
                        {% else %}
                        <div class="row">
                                      <div class="col-md-12"><div class="panel panel-primary">
                            <div class="panel-heading">
                                          <h2 class="panel-title">How to use the interactive step by step derivative calculator</h2>
                                        </div>
                                        <div class="panel-body text-left">
                            <ol>
                              <li>Enter the function you want to take the derivative of in the box to the left and click See Solution.</li>
                              <li>Check that the function that appears below is actually the function you want the derivative of.</li>
                              <li>A step by step interactive solution will appear here.</li>
                              <li>Press the right arrow to advance a step and the left arrow to go back.</li>
                              <li>Follow along and make sure you understand each step.</li>
                              <li>Enter another function and start again.</li>
                            </ol>
                                    

                                  </div></div></div></div>
                                      <div class="row">
                                      <div class="col-md-6"><div class="panel panel-info">
                                        <div class="panel-heading">
                                          <h3 class="panel-title">The Power Rule</h3>
                                        </div>
                                        <div class="panel-body">
                                    <div class="katex_div">\frac{d}{dx}[x^a]=ax^{a-1}</div>
                                          If the base is x and the exponent is a real number, then the derivative is found by bringing the exponent to the front and subtracting 1 from the exponent.
                                        </div>
                                      </div></div>
                                  <div class="col-md-6"><div class="panel panel-info">
                                    <div class="panel-heading">
                                          <h3 class="panel-title">Trigonometric Rules</h3>
                                        </div>
                                        <div class="panel-body">
                                    <div class="katex_div">\frac{d}{dx}[\sin{x}]=\cos{x}</div>
                                    <div class="katex_div">\frac{d}{dx}[\cos{x}]=-\sin{x}</div>
                                    <div class="katex_div">\frac{d}{dx}[\tan{x}]=\sec^2{x}</div>
                                    <div class="katex_div">\frac{d}{dx}[\csc{x}]=-\csc{x}\cot{x}</div>
                                    <div class="katex_div">\frac{d}{dx}[\sec{x}]=\sec{x}\tan{x}</div>
                                    <div class="katex_div">\frac{d}{dx}[\cot{x}]=-\csc^2{x}</div>
                                        </div>
                                      </div></div>
                                  </div>
                                  <div class="row">
                                      <div class="col-md-6"><div class="panel panel-info">
                                        <div class="panel-heading">
                                          <h3 class="panel-title">Logarithm Rule</h3>
                                        </div>
                                        <div class="panel-body">
                                    <div class="katex_div">\frac{d}{dx}[\ln{x}]=\frac{1}{x}</div>
                                          If x is inside of a logarithm then the derivative is 1/x.
                                        </div>
                                      </div></div>
                                  <div class="col-md-6"><div class="panel panel-info">
                                        <div class="panel-heading">
                                          <h3 class="panel-title">Exponential Rule</h3>
                                        </div>
                                        <div class="panel-body">
                                    <div class="katex_div">\frac{d}{dx}[e^x]=e^x</div>
                                          If the base is a real number and x is the exponent, then the derivative is found by simply multiplying by the natural logarithm of the base.
                                    
                                        </div>
                                      </div></div>
                                  </div>
                                  <div class="row">
                                      <div class="col-md-6"><div class="panel panel-info">
                                        <div class="panel-heading">
                                          <h3 class="panel-title">The Product Rule</h3>
                                        </div>
                                        <div class="panel-body">
                                    <div class="katex_div">\frac{d}{dx}[f(x)g(x)]=f(x)\frac{d}{dx}[g(x)]+g(x)\frac{d}{dx}[f(x)]</div>
                                          Find the derivative of each function that is being multiplied. Then multiply each of these by the other original function and add the two products.
                                        </div>
                                      </div></div>
                                  <div class="col-md-6"><div class="panel panel-info">
                                    <div class="panel-heading">
                                          <h3 class="panel-title">The Sum Rule</h3>
                                        </div>
                                        <div class="panel-body">
                                    <div class="katex_div">\frac{d}{dx}[f(x)+g(x)]=\frac{d}{dx}[f(x)]+\frac{d}{dx}[g(x)]</div>
                                          This rule is the easiest of them all. Just take each derivative separately and then add them together at the end.
                                        </div>
                                      </div></div>
                                  </div>
                                <div class="row">
                                      <div class="col-md-6"><div class="panel panel-info">
                                        <div class="panel-heading">
                                          <h3 class="panel-title">The Chain Rule</h3>
                                        </div>
                                        <div class="panel-body">
                                    <div class="katex_div">\frac{d}{dx}[f(g(x))]=f'(g(x))g'(x)</div>
                                          Find the inside function and treat it like a variable. Take the derivative of the outside function with the inside function staying inside. Then multiply by the derivative of the inside function.
                                        </div>
                                      </div></div>
                                  <div class="col-md-6"><div class="panel panel-info">
                                        <div class="panel-heading">
                                          <h3 class="panel-title">The Quotient Rule</h3>
                                        </div>
                                        <div class="panel-body">
                                    <div class="katex_div">\frac{d}{dx}[\frac{f(x)}{g(x)}]=\frac{g(x)\frac{d}{dx}[f(x)]-f(x)\frac{d}{dx}[g(x)]}{g^2(x)}</div>
                                          The numerator is similar to the product rule, but take the derivative of the top first and subtract. The denominator is simply the square of the original denominator.
                                        </div>
                                      </div></div>
                                  </div>
                        {% endif %}

                    

            </div>
        </div>
                        
        <script type="text/javascript">
            // grab all elements in DOM with the class 'equation'
            var tex = document.getElementsByClassName("katex_div");
            // for each element, render the expression attribute
            Array.prototype.forEach.call(tex, function(el) {
                katex.render(el.innerHTML, el);
            });
            // grab all elements in DOM with the class 'equation'
            var tex = document.getElementsByClassName("katex_div_il");
            // for each element, render the expression attribute
            Array.prototype.forEach.call(tex, function(el) {
                katex.render(el.innerHTML, el);
            });
        </script>
    </div>
    </div><!-- /.container -->
    <footer class="footer">
      <div class="container">
        <p class="text-muted">Place sticky footer content here.</p>
      </div>
    </footer>


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script>window.jQuery || document.write('<script src="assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="static/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="static/js/ie10-viewport-bug-workaround.js"></script>
    <script>
$(document).on("pageshow", "[data-role='page']", function () {
 $('div.ui-loader').remove();
});
</script>
    {% for audio in audios %}
            <audio preload="auto" hidden="hidden">
              <source src='/media/audio/{{ audio }}' type="audio/mpeg">
            </audio>
            {% endfor %}
    {% piwik %}
  </body>
</html>
